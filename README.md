# PHP 内核详解

> PHP内核详解系列文章从内存管理到基础类型、哈希表一直到面向对象、虚拟机以及虚拟机生成器，深入、全面地介绍PHP底层原理。
> 
> 与传统源码注释或碎片化文章不同，本系列以 **纪录片式结构** 展示 Zend Engine 的内部世界，从内存分配到虚拟机生成，每一章节既独立成篇，又环环相扣，构成一个完整的知识系统。
> 
> 本系列文章包含已完成初稿的6篇和未完成的2篇，另有笔者学习过程中添加了中注释的php8.2.5源码，现一并奉上，供编程爱好者学习参考。
---

## 已完成的六篇

| 篇章 | 内容概述 |
|------|-----------|
| **内存管理篇** | PHP 内存的分配、页结构、chunk管理与bitset机制。深入讲解 Zend Memory Manager 的核心算法与数据结构。 |
| **类型系统篇** | PHP 的变量与类型模型。解释 `zval`、`zend_value`、`zend_string`、`zend_refcounted` 等底层类型的内存布局与引用计数逻辑。 |
| **数组与哈希表篇** | Zend 引擎最具代表性的结构之一。详细拆解 `zend_array`、`Bucket`、`HashTable` 的组织方式与优化策略。 |
| **面向对象篇** | PHP 类、对象、方法表与继承机制的内部实现。剖析 `zend_class_entry`、`zend_object` 等关键结构。 |
| **编译与执行篇** | 从源码到 OPCODE 的全过程。包括词法分析、语法树构建、opcode生成与执行流程。 |
| **虚拟机生成器篇** | Zend VM 的核心设计。详细说明 opcode 解释器、VM handler、指令调度与优化策略。 |

累计共750多页。

## 未完成的二篇

| 篇章 | 内容概述 |
|------|-----------|
| **内存管理-垃圾回收** | PHP的内存垃圾回收机制。 |
| **面向对象篇（二）** | PHP对象的生命周期及相关操作。 |

以上8篇文章都由笔者亲手撰写，前期注释php内核源码用了1年多时间，原稿是在后续1年中陆续写就，未用到人工智能工具进行辅助。

---

## 📂 目录结构

项目目录结构如下：
```
php-kernel-insight/
├── 原稿/                               # 以上8篇文章的原稿
├── php-8.2.5-源码中文注释/              # 主要注释了zend目录中的c语言代码，未注释优化器等下级目录
├── 辅助文档/                           # 写作过程中用到的辅助文档
└── README.md
```
---


## 🧩 chatgpt修订版

为提升文章品质，减少错漏，优化语言，笔者与chatgpt共同修改润色了本系列文章，正在技术博客中陆续发布。

掘金社区专栏地址：https://juejin.cn/column/7560911782144475186

---

## ⚙️ 开源许可

本项目基于 **MIT License** 发布，允许学习、引用、衍生与协作。请在引用时保留署名。

---

## ⭐ 致读者

如果这份文档帮助你理解了 PHP 内核，请点亮 Star，让更多人看见程序设计的美学。

> —— “理解系统，本身就是一种创造。”
